# ğŸ¯ To-Do App Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          AURA AI ASSISTANT                              â”‚
â”‚                     (Google Gemini 2.5 Flash)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ Function Calling
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BRAIN (core/brain.py)                           â”‚
â”‚  â€¢ Process user queries                                                 â”‚
â”‚  â€¢ Multi-turn conversation                                              â”‚
â”‚  â€¢ Tool calling orchestration                                           â”‚
â”‚  â€¢ HUD section generation                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                               â”‚
                    â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ORIGINAL TOOLS (5)             â”‚  â”‚   TO-DO APP TOOLS (6)            â”‚
â”‚                                  â”‚  â”‚                                  â”‚
â”‚  â€¢ get_calendar_events           â”‚  â”‚  â€¢ add_task                      â”‚
â”‚  â€¢ get_weather                   â”‚  â”‚  â€¢ get_tasks                     â”‚
â”‚  â€¢ get_time                      â”‚  â”‚  â€¢ update_task                   â”‚
â”‚  â€¢ get_date                      â”‚  â”‚  â€¢ delete_task                   â”‚
â”‚  â€¢ search_web                    â”‚  â”‚  â€¢ complete_task                 â”‚
â”‚                                  â”‚  â”‚  â€¢ search_tasks                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   TO-DO APP (core/apps/todo/)              â”‚
                            â”‚                                            â”‚
                            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                            â”‚  â”‚  todo_tool.py                        â”‚ â”‚
                            â”‚  â”‚  â€¢ 6 AI tool declarations            â”‚ â”‚
                            â”‚  â”‚  â€¢ Natural language processing       â”‚ â”‚
                            â”‚  â”‚  â€¢ Date parsing (_parse_due_date)    â”‚ â”‚
                            â”‚  â”‚  â€¢ Task identifier lookup            â”‚ â”‚
                            â”‚  â”‚  â€¢ HUD data generation               â”‚ â”‚
                            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                            â”‚                    â”‚                       â”‚
                            â”‚                    â–¼                       â”‚
                            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                            â”‚  â”‚  todo_app.py                         â”‚ â”‚
                            â”‚  â”‚  â€¢ TodoApp class (main logic)        â”‚ â”‚
                            â”‚  â”‚  â€¢ CRUD operations                   â”‚ â”‚
                            â”‚  â”‚  â€¢ Business logic                    â”‚ â”‚
                            â”‚  â”‚  â€¢ Validation                        â”‚ â”‚
                            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                            â”‚                    â”‚                       â”‚
                            â”‚                    â–¼                       â”‚
                            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                            â”‚  â”‚  todo_storage.py                     â”‚ â”‚
                            â”‚  â”‚  â€¢ TodoStorage class                 â”‚ â”‚
                            â”‚  â”‚  â€¢ SQLite operations                 â”‚ â”‚
                            â”‚  â”‚  â€¢ Database initialization           â”‚ â”‚
                            â”‚  â”‚  â€¢ Indexed queries                   â”‚ â”‚
                            â”‚  â”‚  â€¢ Error handling                    â”‚ â”‚
                            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                            â”‚                    â”‚                       â”‚
                            â”‚                    â–¼                       â”‚
                            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                            â”‚  â”‚  models.py                           â”‚ â”‚
                            â”‚  â”‚  â€¢ Task dataclass                    â”‚ â”‚
                            â”‚  â”‚  â€¢ TaskStatus enum                   â”‚ â”‚
                            â”‚  â”‚  â€¢ TaskPriority enum                 â”‚ â”‚
                            â”‚  â”‚  â€¢ Serialization methods             â”‚ â”‚
                            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
                                                â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   DATABASE (data/apps/todo/todo.db)        â”‚
                            â”‚                                            â”‚
                            â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                            â”‚   â”‚ tasks                              â”‚  â”‚
                            â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
                            â”‚   â”‚ id (TEXT, PRIMARY KEY)             â”‚  â”‚
                            â”‚   â”‚ title (TEXT, NOT NULL)             â”‚  â”‚
                            â”‚   â”‚ description (TEXT)                 â”‚  â”‚
                            â”‚   â”‚ status (TEXT, NOT NULL)            â”‚  â”‚
                            â”‚   â”‚ priority (TEXT, NOT NULL)          â”‚  â”‚
                            â”‚   â”‚ due_date (TEXT)                    â”‚  â”‚
                            â”‚   â”‚ category (TEXT)                    â”‚  â”‚
                            â”‚   â”‚ created_at (TEXT, NOT NULL)        â”‚  â”‚
                            â”‚   â”‚ updated_at (TEXT, NOT NULL)        â”‚  â”‚
                            â”‚   â”‚ tags (TEXT)                        â”‚  â”‚
                            â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                            â”‚                                            â”‚
                            â”‚   Indexes:                                 â”‚
                            â”‚   â€¢ idx_status                             â”‚
                            â”‚   â€¢ idx_priority                           â”‚
                            â”‚   â€¢ idx_due_date                           â”‚
                            â”‚   â€¢ idx_category                           â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
                                                â”‚
                                                â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   FRONTEND HUD (frontend/js/hud.js)        â”‚
                            â”‚                                            â”‚
                            â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                            â”‚   â”‚ Task Statistics (keyvalue)         â”‚  â”‚
                            â”‚   â”‚ â³ Pending: 3                      â”‚  â”‚
                            â”‚   â”‚ ğŸ”„ In Progress: 1                  â”‚  â”‚
                            â”‚   â”‚ âœ… Completed: 2                    â”‚  â”‚
                            â”‚   â”‚ âš ï¸ Overdue: 0                      â”‚  â”‚
                            â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                            â”‚                                            â”‚
                            â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                            â”‚   â”‚ To-Do List (table)                 â”‚  â”‚
                            â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
                            â”‚   â”‚Priorityâ”‚ Task  â”‚ Due  â”‚ Status   â”‚  â”‚
                            â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
                            â”‚   â”‚ğŸ”´ HIGH â”‚ Buy.. â”‚ Tom. â”‚ â³ Pend. â”‚  â”‚
                            â”‚   â”‚ğŸ”´ HIGH â”‚ Fin.. â”‚ Oct  â”‚ â³ Pend. â”‚  â”‚
                            â”‚   â”‚ğŸŸ¡ MED  â”‚ Call  â”‚ 3day â”‚ â³ Pend. â”‚  â”‚
                            â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


DATA FLOW:
â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. User speaks: "Add a task to buy groceries tomorrow"
   â”‚
2. Brain receives query â†’ Calls add_task tool
   â”‚
3. todo_tool.add_task()
   â”œâ”€ Parses "tomorrow" â†’ datetime
   â”œâ”€ Calls TodoApp.create_task()
   â”‚  â””â”€ Creates Task object with UUID
   â”‚     â””â”€ TodoStorage.add_task()
   â”‚        â””â”€ SQLite INSERT
   â””â”€ Returns: "Task added: 'Buy groceries', due tomorrow."
   â”‚
4. Brain calls _process_tool_call_for_hud()
   â”œâ”€ Calls get_tasks_data()
   â”œâ”€ Generates statistics section
   â””â”€ Generates task table section
   â”‚
5. Brain returns:
   {
     "response": "Task added: 'Buy groceries', due tomorrow, Sir.",
     "base64_audio": "...",
     "hud_sections": [
       { statistics section },
       { task table section }
     ]
   }
   â”‚
6. Frontend receives response
   â”œâ”€ Displays text: "Task added..."
   â”œâ”€ Plays audio through TTS
   â””â”€ Renders HUD with statistics + task table


NATURAL LANGUAGE PROCESSING:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Date Parser (_parse_due_date):
  "tomorrow"        â†’ now + 1 day
  "next Friday"     â†’ next occurrence of Friday
  "in 3 days"       â†’ now + 3 days
  "in 2 weeks"      â†’ now + 14 days
  "2025-10-30"      â†’ ISO datetime

Task Identifier (_find_task_by_identifier):
  "groceries"       â†’ Searches for "groceries" in titles
  "Buy groceries"   â†’ Exact match
  "buy"             â†’ Partial match â†’ first result


KEY FEATURES:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ… Multi-turn conversation with context
âœ… Natural language date parsing
âœ… Smart task identification (partial match)
âœ… Priority-based auto-sorting
âœ… Overdue detection and warnings
âœ… HUD auto-generation from tool calls
âœ… TTS-compatible responses (emoji sanitization)
âœ… SQLite with indexed queries
âœ… ACID-compliant transactions
âœ… Error handling at all layers
âœ… Butler-style conversational AI


SCALABILITY:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â€¢ Indexed database (O(log n) queries)
â€¢ Efficient filtering with WHERE clauses
â€¢ Limit support for large lists
â€¢ Statistics cached in single query
â€¢ No N+1 query problems
â€¢ Prepared statements (SQL injection safe)
â€¢ Auto-vacuum for database optimization
```
